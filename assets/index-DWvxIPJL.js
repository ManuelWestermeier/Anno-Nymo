(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();const c=document.querySelector(".cards"),s="http://localhost:8080";window.post=async()=>{var o=new URL(s);o.searchParams.set("title",document.querySelector("#title").value),o.searchParams.set("creater",document.querySelector("#creater").value),o.searchParams.set("content",document.querySelector("textarea").value);var n=await(await fetch(o)).text();document.location.hash=n,document.querySelector(".upload-menu").classList.toggle("card-focus"),window.location.reload()};function l(o){return c.innerHTML+=`<div class="card" onclick="!this.classList.contains('card-focus') && this.classList.add('card-focus')"><h2>Loading...</h2><p>Loading...</p><p>Loading...</p><button style="position: relative; margin: 10px" onclick="share('${o}')">Share</button><button onpointerdown="event.preventDefault()||this.parentElement.classList.remove('card-focus')">CLOSE</button></div>`,c.lastChild.childNodes}window.share=o=>{document.location.hash=o,navigator.share({url:document.location})};async function f(){return await(await fetch(`${s}/random`)).json()}const d=async o=>{for(let n=0;n<o;n++){const{title:i,content:a,meta:e,id:t}=await f(),[r,u,m]=l(t);r.innerText=i,u.innerText=e,m.innerText=a}};c.onscroll=o=>{c.scrollHeight-c.scrollTop-c.clientHeight<200&&d(2)};async function h(){const{title:o,content:n,meta:i,id:a}=await(await fetch(`${s}/id?id=${document.location.hash.replace("#","")}`)).json(),[e,t,r]=l(a);e.parentElement.classList.add("card-focus"),e.innerText=o,t.innerText=i,r.innerText=n}document.location.hash?h():d(10);
